<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>数学I 解き方確認クイズ</title>
    <style>
        body {
            font-family: "Helvetica Neue", Arial, sans-serif;
            background-color: #f0f4f8;
            color: #333;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
        }
        h1 {
            color: #2c3e50;
            font-size: 1.5rem;
            margin-bottom: 20px;
            text-align: center;
        }
        .quiz-container {
            background: white;
            width: 100%;
            max-width: 600px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            min-height: 400px;
        }
        .category-badge {
            position: absolute;
            top: 15px;
            left: 20px;
            background-color: #3498db;
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        .question-area {
            padding: 60px 30px 30px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            font-size: 1.3rem;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 2px dashed #eee;
        }
        .answer-area {
            background-color: #fcfcfc;
            padding: 30px;
            display: none; /* 初期状態は非表示 */
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        .answer-area.show {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        .answer-text {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #e74c3c;
            font-weight: bold;
            margin-bottom: 15px;
        }
        .answer-detail {
            font-size: 0.95rem;
            color: #555;
            text-align: left;
            width: 100%;
            background: #fff;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #eee;
        }
        .btn-container {
            padding: 20px;
            display: flex;
            gap: 10px;
            justify-content: center;
            background: white;
        }
        button {
            border: none;
            padding: 15px 30px;
            font-size: 1rem;
            font-weight: bold;
            border-radius: 30px;
            cursor: pointer;
            transition: transform 0.1s, background 0.2s;
            width: 100%;
            max-width: 250px;
        }
        button:active {
            transform: scale(0.98);
        }
        #show-btn {
            background-color: #3498db;
            color: white;
        }
        #show-btn:hover {
            background-color: #2980b9;
        }
        #next-btn {
            background-color: #2ecc71;
            color: white;
            display: none;
        }
        #next-btn:hover {
            background-color: #27ae60;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .progress {
            margin-top: 10px;
            color: #7f8c8d;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <h1>数学I 解き方・手順クイズ</h1>

    <div class="quiz-container">
        <div class="category-badge" id="category">カテゴリ</div>
        
        <div class="question-area" id="question">
            ここに問題が表示されます
        </div>

        <div class="answer-area" id="answer-area">
            <div class="answer-text" id="answer-main">ここに答えの核が表示されます</div>
            <div class="answer-detail" id="answer-sub">ここに詳しい手順が表示されます</div>
        </div>

        <div class="btn-container">
            <button id="show-btn">答えを見る</button>
            <button id="next-btn">次の問題へ</button>
        </div>
    </div>

    <div class="progress" id="counter">第 1 問</div>

    <script>
        // クイズデータ（解き方の確認）
        const quizData = [
            // --- 2次関数 (基本・決定) ---
            {
                category: "2次関数の決定",
                question: "「頂点が(2, -1)で...」という問題。<br>どの式に代入してスタートする？",
                answer: "y = a(x - p)² + q",
                detail: "頂点 (p, q) がわかっている時は基本形を使います。<br>式を <strong>y = a(x - 2)² - 1</strong> と置いて、通る点の座標を代入して a を求めます。"
            },
            {
                category: "2次関数の決定",
                question: "「3点 (1,2), (3,5), (-1,4) を通る...」という問題。<br>どの式を使う？",
                answer: "y = ax² + bx + c",
                detail: "頂点や軸の情報がない時は一般形を使います。<br>3つの点をすべて代入して、a, b, c の連立方程式（3文字）を作って解きます。"
            },
            {
                category: "2次関数の決定",
                question: "a, b, c の連立方程式。<br>一番最初に消去すべき文字はどれ？",
                answer: "文字 c を消す！",
                detail: "c は係数が全部 1 なので一番消しやすいです。<br>(1)-(2) と (2)-(3) の引き算をして、aとbだけの式を2つ作るのが鉄則です。"
            },
            
            // --- 2次方程式・判別式 ---
            {
                category: "2次方程式",
                question: "「方程式が重解をもつとき...」<br>計算すべき式は？",
                answer: "判別式 D = 0",
                detail: "D = b² - 4ac を計算して、それが <strong>= 0</strong> になるように方程式を立てます。"
            },
            {
                category: "2次方程式",
                question: "「x軸との共有点の個数を求めよ」<br>何をする？",
                answer: "判別式 D の符号（プラス・マイナス）を調べる",
                detail: "方程式を解く必要はありません。<br>・D > 0 なら 2個<br>・D = 0 なら 1個<br>・D < 0 なら 0個"
            },
            {
                category: "2次方程式",
                question: "「x軸と共有点をもたないとき」<br>Dの条件は？",
                answer: "D < 0",
                detail: "解がない（交わらない）ので、判別式はマイナスになります。"
            },

            // --- グラフとx軸 ---
            {
                category: "グラフ",
                question: "「放物線と直線の共有点の座標」<br>最初のステップは？",
                answer: "右辺同士をイコールで結ぶ",
                detail: "放物線の式 ＝ 直線の式 という形を作ります。<br>全部左辺に移項して2次方程式を解けば、交点のx座標が出ます。"
            },
            {
                category: "グラフ",
                question: "「x軸に接する放物線を選べ」<br>どうやって見分ける？",
                answer: "2次方程式の解が「重解（1つ）」になるもの",
                detail: "(x+○)² = 0 の形に変形できるものが「接する」グラフです。<br>判別式 D = 0 になるものを選んでもOKです。"
            },

            // --- 2次不等式 ---
            {
                category: "2次不等式",
                question: "-x² + 4x + 5 > 0 <br>一番最初にやることは？",
                answer: "両辺に -1 を掛けて不等号を逆にする！",
                detail: "x² の前にあるマイナスは計算ミスの元です。<br><strong>x² - 4x - 5 < 0</strong> に直してから解きます。"
            },
            {
                category: "2次不等式",
                question: "(x - 1)(x - 3) > 0 <br>解の範囲は「内側」？「外側」？",
                answer: "外側",
                detail: "式 > 0 （大きい）ときは、解の外側になります。<br>答え： x < 1,  3 < x"
            },
            {
                category: "2次不等式",
                question: "(x - 2)² ≦ 0 <br>これの解はどうなる？",
                answer: "x = 2 だけ",
                detail: "2乗して0以下になるのは、0になる瞬間しかありません。<br>よって x=2 の一点のみが答えです。"
            },
            {
                category: "2次不等式",
                question: "すべての実数 x で成り立つ条件<br>（グラフが常に浮いている）",
                answer: "D < 0",
                detail: "「常に成り立つ」＝「x軸と交わらない」ということ。<br>交わらないので判別式 D はマイナスになります。"
            },

            // --- 三角比 ---
            {
                category: "三角比",
                question: "直角三角形の斜辺と「底辺」を使う三角比は？<br>（sin, cos, tan のどれ？）",
                answer: "cos (コサイン)",
                detail: "cos θ = 底辺 / 斜辺 です。<br>斜辺と底辺で挟むように C を書くのが覚え方です。"
            },
            {
                category: "三角比",
                question: "「ある地点からビルの頂上を見上げた」<br>高さを求める時に使うのは？",
                answer: "tan (タンジェント)",
                detail: "水平距離と高さの関係なので tan を使います。<br>高さ = 水平距離 × tanθ"
            },
            {
                category: "三角比",
                question: "目の高さがある問題で、最後に忘れてはいけないことは？",
                answer: "計算結果に「目の高さ」を足す！",
                detail: "tanで求まるのは「目から上」の高さだけです。<br>最後に身長（目の高さ）を足さないと正解になりません。"
            }
        ];

        // 変数
        let currentQuizIndex = 0;
        let shuffledQuiz = [];

        // 要素の取得
        const categoryEl = document.getElementById("category");
        const questionEl = document.getElementById("question");
        const answerArea = document.getElementById("answer-area");
        const answerMain = document.getElementById("answer-main");
        const answerSub = document.getElementById("answer-sub");
        const showBtn = document.getElementById("show-btn");
        const nextBtn = document.getElementById("next-btn");
        const counterEl = document.getElementById("counter");

        // シャッフル関数
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // クイズ初期化
        function initQuiz() {
            shuffledQuiz = shuffle([...quizData]); // データをコピーしてシャッフル
            currentQuizIndex = 0;
            showQuestion();
        }

        // 問題表示
        function showQuestion() {
            const data = shuffledQuiz[currentQuizIndex];
            
            // 表示リセット
            answerArea.classList.remove("show");
            showBtn.style.display = "inline-block";
            nextBtn.style.display = "none";
            
            // 内容セット
            categoryEl.textContent = data.category;
            questionEl.innerHTML = data.question;
            answerMain.textContent = data.answer;
            answerSub.innerHTML = data.detail;
            counterEl.textContent = `第 ${currentQuizIndex + 1} 問 / 全 ${quizData.length} 問`;
        }

        // ボタンイベント
        showBtn.addEventListener("click", () => {
            answerArea.classList.add("show");
            showBtn.style.display = "none";
            nextBtn.style.display = "inline-block";
        });

        nextBtn.addEventListener("click", () => {
            currentQuizIndex++;
            if (currentQuizIndex < shuffledQuiz.length) {
                showQuestion();
            } else {
                // 一周終了
                if(confirm("全問終了！もう一度シャッフルしてやりますか？")) {
                    initQuiz();
                }
            }
        });

        // 開始
        initQuiz();

    </script>
</body>
</html>
